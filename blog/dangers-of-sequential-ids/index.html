<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Dangers of Sequential IDs - TehGM's Blog</title><meta name=Description content="Sequential IDs can be dangerous. This post explains why you should avoid them, and what are your alternatives."><meta property="og:title" content="Dangers of Sequential IDs"><meta property="og:description" content="Sequential IDs can be dangerous. This post explains why you should avoid them, and what are your alternatives."><meta property="og:type" content="article"><meta property="og:url" content="https://tehgm.net/blog/dangers-of-sequential-ids/"><meta property="og:image" content="https://tehgm.net/img/tehgm_avatar.png"><meta property="article:published_time" content="2020-08-23T16:15:21+00:00"><meta property="article:modified_time" content="2020-09-06T15:43:03+01:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://tehgm.net/img/tehgm_avatar.png"><meta name=twitter:title content="Dangers of Sequential IDs"><meta name=twitter:description content="Sequential IDs can be dangerous. This post explains why you should avoid them, and what are your alternatives."><meta name=application-name content="TehGM"><meta name=apple-mobile-web-app-title content="TehGM"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://tehgm.net/blog/dangers-of-sequential-ids/><link rel=prev href=https://tehgm.net/blog/help-the-needing/><link rel=next href=https://tehgm.net/blog/wordpress-to-hugo/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Dangers of Sequential IDs","inLanguage":"en-gb","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/tehgm.net\/blog\/dangers-of-sequential-ids\/"},"image":["https:\/\/tehgm.net\/img\/tehgm_avatar.png"],"genre":"blog","keywords":"dev","wordcount":947,"url":"https:\/\/tehgm.net\/blog\/dangers-of-sequential-ids\/","datePublished":"2020-08-23T16:15:21+00:00","dateModified":"2020-09-06T15:43:03+01:00","publisher":{"@type":"Organization","name":"TehGM"},"author":{"@type":"Person","name":"TehGM"},"description":"Sequential IDs can be dangerous. This post explains why you should avoid them, and what are your alternatives."}</script></head><body header-desktop header-mobile><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('dark'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'dark'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=TehGM><span id=id-1 class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/ title=Home>Home </a><a class=menu-item href=/blog/ title=Blog>Blog </a><a class=menu-item href=/blog/imo/ title="Blog: IMO">IMO </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=TehGM><span id=id-2 class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/ title=Home>Home</a><a class=menu-item href=/blog/ title=Blog>Blog</a><a class=menu-item href=/blog/imo/ title="Blog: IMO">IMO</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Dangers of Sequential IDs</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://tehgm.net title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw"></i>TehGM</a></span>&nbsp;<span class=post-category>included in <a href=/blog/categories/technology/><i class="far fa-folder fa-fw"></i>Technology</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=23.08.2020>23.08.2020</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;947 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;5 minutes&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#why-sequential-ids-are-evil>Why Sequential IDs are evil</a><ul><li><a href=#a-live-example>A live example</a></li><li><a href=#a-live-example---a-step-further>A live example - a step further</a></li></ul></li><li><a href=#alternatives>Alternatives</a><ul><li><a href=#proper-authorization>Proper Authorization</a></li><li><a href=#guids>GUIDs</a></li><li><a href=#timestamp>Timestamp</a></li><li><a href=#hashids>Hashids</a></li></ul></li><li><a href=#but-sequential-ids-arent-always-evil>But Sequential IDs aren&rsquo;t always evil!</a></li></ul></nav></div></div><div class=content id=content><p>IDs sometimes need to be made public - be it for use in links, WebAPI requests, or in-app referencing. For a long while now I kept telling everyone around to avoid sequential IDs if possible. And in this blog post I aim to explain why.</p><h2 id=why-sequential-ids-are-evil>Why Sequential IDs are evil</h2><p>Imagine a website that allows users to upload some files or data. Once user uploads the file/data, the website tells the user &ldquo;hey, now you can access your stuff at <code>totallysecretfilesspace.com/file/abcdef</code>. Cool, right? The user can now access the file anywhere and even share it.<br>Now the person changes the link in their browser just by one letter - <code>totallysecretfilesspace.com/file/abcdee</code>. A different file opens, uploaded by someone else just a few seconds before.</p><p>Now, severity of this may vary. Most likely this file is not useful to anyone but the uploader. But on the other hand, the uploader might not know the danger - and upload something secret, like their passwords. Yes, no one should ever do it - but we know that in practice people don&rsquo;t concern themselves with security as much as they should.</p><h3 id=a-live-example>A live example</h3><p>For an example I&rsquo;ll use the website used by a popular screenshot tool LightShot - prnt.sc.</p><p>I use LightShot daily - I just don&rsquo;t upload the screenshot automatically. But for this example I took a screenshot and clicked upload. It gave me the following link: <a href=http://prntscr.com/u4f4ih>http://prntscr.com/u4f4ih</a>. Now I change the ID in the link by one letter, and suddenly have someone&rsquo;s screenshot of YouTube: <a href=https://prnt.sc/u4f4ig>https://prnt.sc/u4f4ig</a>.<br>YouTube screenshot isn&rsquo;t dangerous, but as I mentioned earlier, people tend to upload screenshots of very personal nature.</p><h3 id=a-live-example---a-step-further>A live example - a step further</h3><p>I also wrote a simple tool for browsing LightShot to serve as example. All of its source code can be viewed on GitHub: <a href=https://github.com/TehGM/Prnt.sc-Viewer target=_blank rel="noopener noreffer">https://github.com/TehGM/Prnt.sc-Viewer</a>.</p><p>Why did I write this? To show how simple it is. The initial workable (if buggy) version of the tool was ready within 2 or 3 hours - and most of the time I spent on figuring out WPF quirks (as I don&rsquo;t usually work with WPF).<br>In fact, only 2 files of the entire tool are really needed: <a href=https://github.com/TehGM/Prnt.sc-Viewer/blob/master/Prnt.sc%20Viewer%20Core%20Lib/ScreenshotID.cs target=_blank rel="noopener noreffer">ScreenshotID.cs</a> which deals with incrementing and decrementing non-number ID by one, and <a href=https://github.com/TehGM/Prnt.sc-Viewer/blob/master/Prnt.sc%20Viewer%20Core%20Lib/ScreenshotDownloadingExtensions.cs target=_blank rel="noopener noreffer">ScreenshotDownloadingExtensions.cs</a> which makes requests to prnt.sc website. And that&rsquo;s it - all other files are just fancy wrappers and logic for displaying the content on screen.</p><p>This really shows that semi-automating (or even full-automating) the scrapping of sequential ID-based web applications is so easy, so virtually anyone can do it.</p><h2 id=alternatives>Alternatives</h2><p>Now you might ask how to deal with the problem. I shall suggest some potential solutions:</p><h3 id=proper-authorization>Proper Authorization</h3><p>One of the best options isn&rsquo;t really an alternative to sequential IDs, but rather a mechanism that will reduce or completely remove risks I mentioned before - implementing proper authentication and authorization.<br>To view uploaded content, the user has to login, and needs to have proper permissions granted by the uploader.</p><p>Of course this solution requires some effort to implement the security. In addition, granting permissions is a manual task - something users might be not happy about. Still this remains the most secure option.</p><h3 id=guids>GUIDs</h3><p>The first alternative to sequential IDs is really simple - use <a href=https://en.wikipedia.org/wiki/Universally_unique_identifier target=_blank rel="noopener noreffer">GUIDs (UUIDs)</a>. They&rsquo;re designed to be unique, and as such, are generally not sequential (at least not in increment-by-one meaning). They unfortunately are long, so aren&rsquo;t great for links.</p><p>Encoding GUID bytes (for example using Base64) works well for making them much shorter. For most use cases it&rsquo;ll be perfect - it won&rsquo;t be a sequential ID, and well usable for links - think YouTube video links. Mads Kristensen posted a great example on <a href=https://www.madskristensen.net/blog/generate-unique-strings-and-numbers-in-c/ target=_blank rel="noopener noreffer">his blog</a> - make sure to check it out!</p><p>As an experiment I tried reducing the length of GUID even further by calling C#&rsquo;s <code>GetHashCode()</code>. Of course I expected collisions to occur, but they started happening way faster than I expected - at around 400k GUIDs generated, collisions were very frequent.<figure><a class=lightgallery href=/blog/dangers-of-sequential-ids/screenshot1.png title="GUID HashCode Collision Test" data-thumbnail=/blog/dangers-of-sequential-ids/screenshot1.png data-sub-html="<h2>GUID HashCode Collision Test</h2><p>GUID HashCode Collision Test</p>"><img class=lazyload src=/svg/loading.min.svg data-src=screenshot1.png data-srcset="/blog/dangers-of-sequential-ids/screenshot1.png, screenshot1.png 1.5x, /blog/dangers-of-sequential-ids/screenshot1.png 2x" data-sizes=auto alt=Screenshot></a><figcaption class=image-caption>GUID HashCode Collision Test</figcaption></figure></p><h3 id=timestamp>Timestamp</h3><p>For content that isn&rsquo;t generated frequently, using Timestamp (C# example: <code>DateTime</code>'s <code>Ticks</code> property) can work well. Collision chance won&rsquo;t be really high in such small infrequently used applications. The code would also be really simple: <code>DateTime.UtcNow.Ticks.ToString("x")</code>.</p><p>However DateTime ticks might not be ideal for any kind of distributed systems that are used a lot by users - in such applications, collision chance is real. For that reason I&rsquo;d personally advise against this, but YMMV.</p><h3 id=hashids>Hashids</h3><p>After researching GUIDs, I came across a cool looking library called <a href=https://hashids.org/net/ target=_blank rel="noopener noreffer">Hashids</a>. It takes secret seed and number as input, and generates non-sequential string ID. You can also reverse it back into a number. Because it uses secure seed, it&rsquo;s not so trivial to determine order of IDs.<br>With this library, you can store normal (even sequential) IDs in database, while providing non-sequential string IDs publicly.</p><h2 id=but-sequential-ids-arent-always-evil>But Sequential IDs aren&rsquo;t always evil!</h2><p>You might shout this in response to this post. And you&rsquo;d be absolutely right!</p><p>Sequential IDs are okay if you&rsquo;re using proper authentication and authorization - since you&rsquo;re checking who accesses the content anyway, IDs being predictable doesn&rsquo;t matter much.<br>They also are okay if the content is never sensitive. Of course it might be hard to ensure this when content is user-provided - but make sure they&rsquo;re very well aware that any content they upload will be public!</p><p>And in fact, even if IDs are non-sequential, it&rsquo;s worth pointing that out to users. If you aren&rsquo;t using proper permissions and authorization, any public link content is well&mldr; public. With little luck (or some brute-force), anyone will be able to find it.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 06.09.2020</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://tehgm.net/blog/dangers-of-sequential-ids/ data-title="Dangers of Sequential IDs" data-via=TehOriginalGM data-hashtags=dev><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://tehgm.net/blog/dangers-of-sequential-ids/ data-hashtag=dev><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=https://tehgm.net/blog/dangers-of-sequential-ids/ data-title="Dangers of Sequential IDs" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="Share on Tumblr" data-sharer=tumblr data-url=https://tehgm.net/blog/dangers-of-sequential-ids/ data-title="Dangers of Sequential IDs" data-caption="Sequential IDs can be dangerous. This post explains why you should avoid them, and what are your alternatives." data-tags=dev><i class="fab fa-tumblr fa-fw"></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://tehgm.net/blog/dangers-of-sequential-ids/ data-title="Dangers of Sequential IDs"><i class="fab fa-hacker-news fa-fw"></i></a><a href=javascript:void(0); title="Share on Reddit" data-sharer=reddit data-url=https://tehgm.net/blog/dangers-of-sequential-ids/><i class="fab fa-reddit fa-fw"></i></a><a href=javascript:void(0); title="Share on Myspace" data-sharer=myspace data-url=https://tehgm.net/blog/dangers-of-sequential-ids/ data-title="Dangers of Sequential IDs" data-description="Sequential IDs can be dangerous. This post explains why you should avoid them, and what are your alternatives."><i data-svg-src=/lib/simple-icons/icons/myspace.min.svg></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/blog/tags/dev/>dev</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/blog/help-the-needing/ class=prev rel=prev title="Help the Needing"><i class="fas fa-angle-left fa-fw"></i>Help the Needing</a>
<a href=/blog/wordpress-to-hugo/ class=next rel=next title="Migrating from Wordpress to Hugo">Migrating from Wordpress to Hugo<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://tehgm.net>TehGM</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/typeit/typeit.min.js></script><script type=text/javascript src=https://code.jquery.com/jquery-3.5.1.min.js></script><script type=text/javascript src=/js/spoiler.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"data":{"id-1":"TehGM","id-2":"TehGM"},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"typeit":{"cursorChar":null,"cursorSpeed":null,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":null,"speed":null}};</script><script type=text/javascript src=/js/theme.min.js></script></body></html>